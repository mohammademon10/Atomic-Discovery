<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Interactive Periodic Table (Full 118)</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        :root {
            --bg-dark: #020617;
            --card-bg: #1e293b;
        }
        body {
            background-color: var(--bg-dark);
            color: white;
            font-family: 'Inter', system-ui, -apple-system, sans-serif;
            overflow-x: hidden;
        }
        .periodic-wrapper {
            overflow-x: auto;
            padding: 20px;
            display: flex;
            justify-content: center;
        }
        .periodic-grid {
            display: grid;
            grid-template-columns: repeat(18, 1fr);
            grid-template-rows: repeat(10, 1fr);
            gap: 4px;
            width: 100%;
            max-width: 1400px;
            min-width: 1000px;
        }
        .element-card {
            aspect-ratio: 1 / 1;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            border-radius: 6px;
            cursor: pointer;
            transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
            position: relative;
            border: 1px solid rgba(255,255,255,0.05);
            padding: 4px;
            user-select: none;
        }
        .element-card:hover {
            transform: scale(1.25);
            z-index: 50;
            filter: brightness(1.25);
            box-shadow: 0 0 25px rgba(0,0,0,0.5), 0 0 0 2px rgba(255,255,255,0.2);
        }
        .element-symbol {
            font-weight: 800;
            font-size: 1.1rem;
            line-height: 1;
        }
        .element-name {
            font-size: 0.5rem;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
            width: 100%;
            text-align: center;
            margin-top: 2px;
            opacity: 0.8;
        }
        .element-number {
            position: absolute;
            top: 2px;
            left: 3px;
            font-size: 0.55rem;
            opacity: 0.6;
            font-weight: 700;
        }

        /* Scientific Color Palette */
        .alkali-metal { background-color: #ef4444; }
        .alkaline-earth-metal { background-color: #f97316; }
        .transition-metal { background-color: #475569; }
        .lanthanide { background-color: #ec4899; }
        .actinide { background-color: #a855f7; }
        .post-transition-metal { background-color: #0ea5e9; }
        .metalloid { background-color: #10b981; }
        .reactive-nonmetal { background-color: #3b82f6; }
        .noble-gas { background-color: #6366f1; }
        .unknown { background-color: #334155; border-style: dashed; }

        #modal {
            display: none;
            position: fixed;
            inset: 0;
            background: rgba(0, 0, 0, 0.9);
            backdrop-filter: blur(15px);
            z-index: 100;
            align-items: center;
            justify-content: center;
            padding: 20px;
        }

        .loader {
            border: 3px solid rgba(255,255,255,0.1);
            border-top: 3px solid #60a5fa;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            animation: spin 0.8s linear infinite;
        }

        @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }

        /* Custom scrollbar */
        ::-webkit-scrollbar { height: 8px; width: 8px; }
        ::-webkit-scrollbar-track { background: #0f172a; }
        ::-webkit-scrollbar-thumb { background: #334155; border-radius: 10px; }
    </style>
</head>
<body>

    <header class="text-center pt-12 pb-6 px-4">
        <h1 class="text-5xl font-black tracking-tighter text-transparent bg-clip-text bg-gradient-to-r from-blue-400 via-indigo-400 to-emerald-400">
            Atomic Discovery
        </h1>
        <p class="text-slate-400 mt-4 text-lg max-w-2xl mx-auto">Explore every building block of the universe. Click any element to see its real physical form.</p>
    </header>

    <div class="periodic-wrapper">
        <div id="periodic-table" class="periodic-grid">
            <!-- JS will inject 118 elements + spacing labels here -->
        </div>
    </div>

    <div id="modal">
        <div class="bg-slate-900 rounded-[2.5rem] max-w-5xl w-full p-8 md:p-12 shadow-2xl relative border border-slate-800 flex flex-col md:flex-row gap-12 overflow-hidden">
            <button id="close-modal" class="absolute top-8 right-8 text-slate-500 hover:text-white transition-all text-4xl leading-none">&times;</button>
            
            <div class="w-full md:w-1/2">
                <div id="image-container" class="aspect-square bg-slate-950 rounded-3xl overflow-hidden flex items-center justify-center relative border border-slate-800 shadow-inner">
                    <div id="image-loader" class="hidden flex flex-col items-center">
                        <div class="loader mb-6"></div>
                        <p id="loader-text" class="text-xs font-mono tracking-widest text-blue-400 uppercase">Fetching Reference...</p>
                    </div>
                    <img id="element-image" src="" alt="" class="w-full h-full object-cover hidden">
                    <div id="image-placeholder" class="text-slate-600 font-bold uppercase text-center p-8">
                        Visualizing...
                    </div>
                </div>
            </div>

            <div class="w-full md:w-1/2 flex flex-col justify-center">
                <div class="mb-8">
                    <span id="element-category" class="px-4 py-1.5 rounded-full text-[10px] font-black uppercase tracking-[0.2em] bg-white/5 text-blue-400 border border-white/10 mb-4 inline-block"></span>
                    <h2 id="element-name" class="text-6xl font-black mb-2 tracking-tight"></h2>
                    <p id="element-appearance" class="text-slate-500 italic text-lg"></p>
                </div>
                
                <div class="grid grid-cols-3 gap-4 mb-8">
                    <div class="bg-slate-800/40 p-5 rounded-3xl border border-white/5">
                        <span class="text-[10px] uppercase font-bold text-slate-500 block mb-2">Atomic #</span>
                        <span id="atomic-number" class="text-3xl font-black font-mono text-white"></span>
                    </div>
                    <div class="bg-slate-800/40 p-5 rounded-3xl border border-white/5">
                        <span class="text-[10px] uppercase font-bold text-slate-500 block mb-2">Symbol</span>
                        <span id="symbol" class="text-3xl font-black font-mono text-blue-400"></span>
                    </div>
                    <div class="bg-slate-800/40 p-5 rounded-3xl border border-white/5">
                        <span class="text-[10px] uppercase font-bold text-slate-500 block mb-2">Weight</span>
                        <span id="atomic-mass" class="text-xl font-black font-mono text-white"></span>
                    </div>
                </div>

                <div class="space-y-6">
                    <p id="element-summary" class="text-slate-300 text-lg leading-relaxed"></p>
                    <button id="generate-btn" class="w-full bg-white hover:bg-blue-50 text-slate-900 py-5 rounded-3xl font-black text-xl tracking-tight transition-all active:scale-95 flex items-center justify-center gap-3">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12a9 9 0 1 1-9-9c2.52 0 4.93 1 6.74 2.74L21 8"/><path d="M21 3v5h-5"/></svg>
                        Refresh Image
                    </button>
                    <div id="source-indicator" class="text-[9px] text-slate-600 uppercase font-mono text-center tracking-widest"></div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // API KEY: Provided automatically in the Canvas environment.
        // For VS Code: Get a key at aistudio.google.com and paste it here.
        const apiKey = ""; 

        const fullElementsData = [
            {n:1,s:"H",name:"Hydrogen",cat:"reactive-nonmetal",x:1,y:1,m:1.008,sum:"Lightest and most abundant element in the universe."},
            {n:2,s:"He",name:"Helium",cat:"noble-gas",x:18,y:1,m:4.0026,sum:"Second lightest element, inert gas used in balloons."},
            {n:3,s:"Li",name:"Lithium",cat:"alkali-metal",x:1,y:2,m:6.94,sum:"Lightest solid metal, essential for modern batteries."},
            {n:4,s:"Be",name:"Beryllium",cat:"alkaline-earth-metal",x:2,y:2,m:9.0122,sum:"Steel-gray, strong, lightweight metal used in aerospace."},
            {n:5,s:"B",name:"Boron",cat:"metalloid",x:13,y:2,m:10.81,sum:"Metalloid used in heat-resistant glassware and detergents."},
            {n:6,s:"C",name:"Carbon",cat:"reactive-nonmetal",x:14,y:2,m:12.011,sum:"The basis of all known life, found in diamonds and graphite."},
            {n:7,s:"N",name:"Nitrogen",cat:"reactive-nonmetal",x:15,y:2,m:14.007,sum:"Makes up 78% of Earth's atmosphere, vital for proteins."},
            {n:8,s:"O",name:"Oxygen",cat:"reactive-nonmetal",x:16,y:2,m:15.999,sum:"Highly reactive gas essential for respiration and water."},
            {n:9,s:"F",name:"Fluorine",cat:"reactive-nonmetal",x:17,y:2,m:18.998,sum:"The most reactive and electronegative of all elements."},
            {n:10,s:"Ne",name:"Neon",cat:"noble-gas",x:18,y:2,m:20.180,sum:"Noble gas famous for its brilliant orange-red glow."},
            {n:11,s:"Na",name:"Sodium",cat:"alkali-metal",x:1,y:3,m:22.990,sum:"Highly reactive alkali metal found in table salt."},
            {n:12,s:"Mg",name:"Magnesium",cat:"alkaline-earth-metal",x:2,y:3,m:24.305,sum:"Shiny gray solid used in alloys for lightweight parts."},
            {n:13,s:"Al",name:"Aluminum",cat:"post-transition-metal",x:13,y:3,m:26.982,sum:"Lightweight, non-magnetic, and corrosion-resistant metal."},
            {n:14,s:"Si",name:"Silicon",cat:"metalloid",x:14,y:3,m:28.085,sum:"Semiconductor used in almost all electronic devices."},
            {n:15,s:"P",name:"Phosphorus",cat:"reactive-nonmetal",x:15,y:3,m:30.974,sum:"Essential for DNA and used in matches and fertilizers."},
            {n:16,s:"S",name:"Sulfur",cat:"reactive-nonmetal",x:16,y:3,m:32.06,sum:"Yellow nonmetal found in minerals and volcanic gases."},
            {n:17,s:"Cl",name:"Chlorine",cat:"reactive-nonmetal",x:17,y:3,m:35.45,sum:"Yellow-green gas used as a disinfectant and oxidant."},
            {n:18,s:"Ar",name:"Argon",cat:"noble-gas",x:18,y:3,m:39.948,sum:"Most common noble gas, used in specialized lighting."},
            {n:19,s:"K",name:"Potassium",cat:"alkali-metal",x:1,y:4,m:39.098,sum:"Essential mineral for cell function and fertilizers."},
            {n:20,s:"Ca",name:"Calcium",cat:"alkaline-earth-metal",x:2,y:4,m:40.078,sum:"Crucial for bone health and the fifth most abundant metal."},
            {n:21,s:"Sc",name:"Scandium",cat:"transition-metal",x:3,y:4,m:44.956,sum:"Silvery-white metallic d-block element, used in alloys."},
            {n:22,s:"Ti",name:"Titanium",cat:"transition-metal",x:4,y:4,m:47.867,sum:"Strong, low-density metal with high corrosion resistance."},
            {n:23,s:"V",name:"Vanadium",cat:"transition-metal",x:5,y:4,m:50.942,sum:"Hard, silvery-gray, ductile, and malleable transition metal."},
            {n:24,s:"Cr",name:"Chromium",cat:"transition-metal",x:6,y:4,m:51.996,sum:"Steely-gray, lustrous, hard and brittle metal used in stainless steel."},
            {n:25,s:"Mn",name:"Manganese",cat:"transition-metal",x:7,y:4,m:54.938,sum:"Important for industrial metal alloy uses, particularly in steels."},
            {n:26,s:"Fe",name:"Iron",cat:"transition-metal",x:8,y:4,m:55.845,sum:"The most common element on Earth by mass."},
            {n:27,s:"Co",name:"Cobalt",cat:"transition-metal",x:9,y:4,m:58.933,sum:"Hard, lustrous, silver-gray metal found in Earth's crust."},
            {n:28,s:"Ni",name:"Nickel",cat:"transition-metal",x:10,y:4,m:58.693,sum:"Silvery-white lustrous metal with a slight golden tinge."},
            {n:29,s:"Cu",name:"Copper",cat:"transition-metal",x:11,y:4,m:63.546,sum:"Soft, malleable, and ductile metal with high conductivity."},
            {n:30,s:"Zn",name:"Zinc",cat:"transition-metal",x:12,y:4,m:65.38,sum:"Brittle metal used to galvanize steel."},
            {n:31,s:"Ga",name:"Gallium",cat:"post-transition-metal",x:13,y:4,m:69.723,sum:"Silvery metal that melts in your hand."},
            {n:32,s:"Ge",name:"Germanium",cat:"metalloid",x:14,y:4,m:72.63,sum:"Lustrous gray-white metalloid used in transistors."},
            {n:33,s:"As",name:"Arsenic",cat:"metalloid",x:15,y:4,m:74.922,sum:"Famous for its toxicity and use in alloys."},
            {n:34,s:"Se",name:"Selenium",cat:"reactive-nonmetal",x:16,y:4,m:78.971,sum:"Nonmetal used in glassmaking and electronics."},
            {n:35,s:"Br",name:"Bromine",cat:"reactive-nonmetal",x:17,y:4,m:79.904,sum:"Only nonmetal that is liquid at room temperature."},
            {n:36,s:"Kr",name:"Krypton",cat:"noble-gas",x:18,y:4,m:83.798,sum:"Noble gas used in high-speed photography."},
            {n:37,s:"Rb",name:"Rubidium",cat:"alkali-metal",x:1,y:5,m:85.468,sum:"Soft, silvery-white alkali metal."},
            {n:38,s:"Sr",name:"Strontium",cat:"alkaline-earth-metal",x:2,y:5,m:87.62,sum:"Highly reactive metal used in fireworks."},
            {n:39,s:"Y",name:"Yttrium",cat:"transition-metal",x:3,y:5,m:88.906,sum:"Transition metal used in superconductors."},
            {n:40,s:"Zr",name:"Zirconium",cat:"transition-metal",x:4,y:5,m:91.224,sum:"Resistant to corrosion, used in nuclear reactors."},
            {n:41,s:"Nb",name:"Niobium",cat:"transition-metal",x:5,y:5,m:92.906,sum:"Used in superconducting alloys and jet engines."},
            {n:42,s:"Mo",name:"Molybdenum",cat:"transition-metal",x:6,y:5,m:95.95,sum:"Important alloying agent for hard steels."},
            {n:43,s:"Tc",name:"Technetium",cat:"transition-metal",x:7,y:5,m:98,sum:"First artificially produced element."},
            {n:44,s:"Ru",name:"Ruthenium",cat:"transition-metal",x:8,y:5,m:101.07,sum:"Hard transition metal used in electrical contacts."},
            {n:45,s:"Rh",name:"Rhodium",cat:"transition-metal",x:9,y:5,m:102.91,sum:"Rare precious metal used in catalytic converters."},
            {n:46,s:"Pd",name:"Palladium",cat:"transition-metal",x:10,y:5,m:106.42,sum:"Lustrous metal used in jewelry and electronics."},
            {n:47,s:"Ag",name:"Silver",cat:"transition-metal",x:11,y:5,m:107.87,sum:"White metal with highest electrical conductivity."},
            {n:48,s:"Cd",name:"Cadmium",cat:"transition-metal",x:12,y:5,m:112.41,sum:"Used in rechargeable batteries and pigments."},
            {n:49,s:"In",name:"Indium",cat:"post-transition-metal",x:13,y:5,m:114.82,sum:"Soft metal used in touchscreens."},
            {n:50,s:"Sn",name:"Tin",cat:"post-transition-metal",x:14,y:5,m:118.71,sum:"Malleable metal used to coat other metals."},
            {n:51,s:"Sb",name:"Antimony",cat:"metalloid",x:15,y:5,m:121.76,sum:"Used in flameproofing and semiconductors."},
            {n:52,s:"Te",name:"Tellurium",cat:"metalloid",x:16,y:5,m:127.6,sum:"Rare metalloid used in thermo-electrics."},
            {n:53,s:"I",name:"Iodine",cat:"reactive-nonmetal",x:17,y:5,m:126.9,sum:"Lustrous purple solid used in medicine."},
            {n:54,s:"Xe",name:"Xenon",cat:"noble-gas",x:18,y:5,m:131.29,sum:"Noble gas used in specialized lamps."},
            {n:55,s:"Cs",name:"Cesium",cat:"alkali-metal",x:1,y:6,m:132.91,sum:"Highly reactive metal used in atomic clocks."},
            {n:56,s:"Ba",name:"Barium",cat:"alkaline-earth-metal",x:2,y:6,m:137.33,sum:"Silvery metal used in glass and medical tests."},
            {n:57,s:"La",name:"Lanthanum",cat:"lanthanide",x:4,y:9,m:138.91,sum:"Rare earth metal used in camera lenses."},
            {n:58,s:"Ce",name:"Cerium",cat:"lanthanide",x:5,y:9,m:140.12,sum:"Used in self-cleaning ovens and lighters."},
            {n:59,s:"Pr",name:"Praseodymium",cat:"lanthanide",x:6,y:9,m:140.91,sum:"Used in specialized glass and magnets."},
            {n:60,s:"Nd",name:"Neodymium",cat:"lanthanide",x:7,y:9,m:144.24,sum:"Used in strong permanent magnets."},
            {n:61,s:"Pm",name:"Promethium",cat:"lanthanide",x:8,y:9,m:145,sum:"Radioactive element used in atomic batteries."},
            {n:62,s:"Sm",name:"Samarium",cat:"lanthanide",x:9,y:9,m:150.36,sum:"Used in magnets and medical treatments."},
            {n:63,s:"Eu",name:"Europium",cat:"lanthanide",x:10,y:9,m:151.96,sum:"Reactive rare earth used in screen phosphors."},
            {n:64,s:"Gd",name:"Gadolinium",cat:"lanthanide",x:11,y:9,m:157.25,sum:"Used as a contrast agent in MRI scans."},
            {n:65,s:"Tb",name:"Terbium",cat:"lanthanide",x:12,y:9,m:158.93,sum:"Used in green phosphors for lamps."},
            {n:66,s:"Dy",name:"Dysprosium",cat:"lanthanide",x:13,y:9,m:162.5,sum:"Used for high magnetic properties in electronics."},
            {n:67,s:"Ho",name:"Holmium",cat:"lanthanide",x:14,y:9,m:164.93,sum:"Highest magnetic strength of any element."},
            {n:68,s:"Er",name:"Erbium",cat:"lanthanide",x:15,y:9,m:167.26,sum:"Used in fiber optics and lasers."},
            {n:69,s:"Tm",name:"Thulium",cat:"lanthanide",x:16,y:9,m:168.93,sum:"Used in portable X-ray machines."},
            {n:70,s:"Yb",name:"Ytterbium",cat:"lanthanide",x:17,y:9,m:173.05,sum:"Used in atomic clocks."},
            {n:71,s:"Lu",name:"Lutetium",cat:"lanthanide",x:18,y:9,m:174.97,sum:"Hardest of the lanthanide series."},
            {n:72,s:"Hf",name:"Hafnium",cat:"transition-metal",x:4,y:6,m:178.49,sum:"Used in nuclear control rods."},
            {n:73,s:"Ta",name:"Tantalum",cat:"transition-metal",x:5,y:6,m:180.95,sum:"Used in high-end electronic capacitors."},
            {n:74,s:"W",name:"Tungsten",cat:"transition-metal",x:6,y:6,m:183.84,sum:"Highest melting point of all metals."},
            {n:75,s:"Re",name:"Rhenium",cat:"transition-metal",x:7,y:6,m:186.21,sum:"Transition metal used in jet engine alloys."},
            {n:76,s:"Os",name:"Osmium",cat:"transition-metal",x:8,y:6,m:190.23,sum:"Densest naturally occurring element."},
            {n:77,s:"Ir",name:"Iridium",cat:"transition-metal",x:9,y:6,m:192.22,sum:"Most corrosion-resistant metal."},
            {n:78,s:"Pt",name:"Platinum",cat:"transition-metal",x:10,y:6,m:195.08,sum:"Precious metal used as a catalyst."},
            {n:79,s:"Au",name:"Gold",cat:"transition-metal",x:11,y:6,m:196.97,sum:"Precious yellow metal with excellent conductivity."},
            {n:80,s:"Hg",name:"Mercury",cat:"transition-metal",x:12,y:6,m:200.59,sum:"Metallic element liquid at room temperature."},
            {n:81,s:"Tl",name:"Thallium",cat:"post-transition-metal",x:13,y:6,m:204.38,sum:"Toxic metal used in medical scans."},
            {n:82,s:"Pb",name:"Lead",cat:"post-transition-metal",x:14,y:6,m:207.2,sum:"Dense metal used for shielding radiation."},
            {n:83,s:"Bi",name:"Bismuth",cat:"post-transition-metal",x:15,y:6,m:208.98,sum:"Metal used in medicine and cosmetics."},
            {n:84,s:"Po",name:"Polonium",cat:"post-transition-metal",x:16,y:6,m:209,sum:"Highly radioactive and rare metal."},
            {n:85,s:"At",name:"Astatine",cat:"metalloid",x:17,y:6,m:210,sum:"Rarest natural element on Earth."},
            {n:86,s:"Rn",name:"Radon",cat:"noble-gas",x:18,y:6,m:222,sum:"Radioactive gas from the soil."},
            {n:87,s:"Fr",name:"Francium",cat:"alkali-metal",x:1,y:7,m:223,sum:"Extremely rare and radioactive."},
            {n:88,s:"Ra",name:"Radium",cat:"alkaline-earth-metal",x:2,y:7,m:226,sum:"Radioactive metal discovered by Marie Curie."},
            {n:89,s:"Ac",name:"Actinium",cat:"actinide",x:4,y:10,m:227,sum:"Radioactive metal used for research."},
            {n:90,s:"Th",name:"Thorium",cat:"actinide",x:5,y:10,m:232.04,sum:"Radioactive metal potential fuel for reactors."},
            {n:91,s:"Pa",name:"Protactinium",cat:"actinide",x:6,y:10,m:231.04,sum:"Rare radioactive actinide metal."},
            {n:92,s:"U",name:"Uranium",cat:"actinide",x:7,y:10,m:238.03,sum:"Heavy metal used for nuclear power."},
            {n:93,s:"Np",name:"Neptunium",cat:"actinide",x:8,y:10,m:237,sum:"First transuranic element ever produced."},
            {n:94,s:"Pu",name:"Plutonium",cat:"actinide",x:9,y:10,m:244,sum:"Transuranic metal used in power sources."},
            {n:95,s:"Am",name:"Americium",cat:"actinide",x:10,y:10,m:243,sum:"Used in household smoke detectors."},
            {n:96,s:"Cm",name:"Curium",cat:"actinide",x:11,y:10,m:247,sum:"Transuranic element named after the Curies."},
            {n:97,s:"Bk",name:"Berkelium",cat:"actinide",x:12,y:10,m:247,sum:"Radioactive element named after Berkeley."},
            {n:98,s:"Cf",name:"Californium",cat:"actinide",x:13,y:10,m:251,sum:"Used in specialized material sensors."},
            {n:99,s:"Es",name:"Einsteinium",cat:"actinide",x:14,y:10,m:252,sum:"Synthetic element found in H-bomb debris."},
            {n:100,s:"Fm",name:"Fermium",cat:"actinide",x:15,y:10,m:257,sum:"Synthetic element named after Enrico Fermi."},
            {n:101,s:"Md",name:"Mendelevium",cat:"actinide",x:16,y:10,m:258,sum:"Synthetic element named after Mendeleev."},
            {n:102,s:"No",name:"Nobelium",cat:"actinide",x:17,y:10,m:259,sum:"Synthetic element named after Alfred Nobel."},
            {n:103,s:"Lr",name:"Lawrencium",cat:"actinide",x:18,y:10,m:262,sum:"Final element of the actinide series."},
            {n:104,s:"Rf",name:"Rutherfordium",cat:"transition-metal",x:4,y:7,m:267,sum:"Synthetic radioactive transition metal."},
            {n:105,s:"Db",name:"Dubnium",cat:"transition-metal",x:5,y:7,m:268,sum:"Radioactive synthetic transition metal."},
            {n:106,s:"Sg",name:"Seaborgium",cat:"transition-metal",x:6,y:7,m:269,sum:"Synthetic element named after Glenn T. Seaborg."},
            {n:107,s:"Bh",name:"Bohrium",cat:"transition-metal",x:7,y:7,m:270,sum:"Synthetic element named after Niels Bohr."},
            {n:108,s:"Hs",name:"Hassium",cat:"transition-metal",x:8,y:7,m:271,sum:"Synthetic element named after Hesse, Germany."},
            {n:109,s:"Mt",name:"Meitnerium",cat:"unknown",x:9,y:7,m:278,sum:"Synthetic element named after Lise Meitner."},
            {n:110,s:"Ds",name:"Darmstadtium",cat:"unknown",x:10,y:7,m:281,sum:"Synthetic element named after Darmstadt."},
            {n:111,s:"Rg",name:"Roentgenium",cat:"unknown",x:11,y:7,m:282,sum:"Synthetic element named after Wilhelm RÃ¶ntgen."},
            {n:112,s:"Cn",name:"Copernicium",cat:"transition-metal",x:12,y:7,m:285,sum:"Synthetic element named after Copernicus."},
            {n:113,s:"Nh",name:"Nihonium",cat:"unknown",x:13,y:7,m:286,sum:"Synthetic element named after 'Nihon' (Japan)."},
            {n:114,s:"Fl",name:"Flerovium",cat:"post-transition-metal",x:14,y:7,m:289,sum:"Post-transition metal first made in 1998."},
            {n:115,s:"Mc",name:"Moscovium",cat:"unknown",x:15,y:7,m:290,sum:"Synthetic element named after Moscow."},
            {n:116,s:"Lv",name:"Livermorium",cat:"unknown",x:16,y:7,m:293,sum:"Synthetic element named after Livermore Lab."},
            {n:117,s:"Ts",name:"Tennessine",cat:"unknown",x:17,y:7,m:294,sum:"Synthetic element named after Tennessee."},
            {n:118,s:"Og",name:"Oganesson",cat:"noble-gas",x:18,y:7,m:294,sum:"Heaviest element on the periodic table."}
        ];

        function initTable() {
            const grid = document.getElementById('periodic-table');
            grid.innerHTML = "";
            fullElementsData.forEach(el => {
                const card = document.createElement('div');
                card.className = `element-card ${el.cat}`;
                card.style.gridColumn = el.x;
                card.style.gridRow = el.y;
                card.innerHTML = `
                    <span class="element-number">${el.n}</span>
                    <span class="element-symbol">${el.s}</span>
                    <span class="element-name">${el.name}</span>
                `;
                card.onclick = () => openModal(el);
                grid.appendChild(card);
            });

            // Spacing for 57-71 and 89-103
            const spacers = [
                {x:3, y:6, t:"57-71", c:"lanthanide"},
                {x:3, y:7, t:"89-103", c:"actinide"}
            ];
            spacers.forEach(s => {
                const d = document.createElement('div');
                d.className = `element-card ${s.c} opacity-30 italic cursor-default pointer-events-none`;
                d.style.gridColumn = s.x;
                d.style.gridRow = s.y;
                d.innerHTML = `<span class="text-[0.5rem] font-black">${s.t}</span>`;
                grid.appendChild(d);
            });
        }

        async function fetchWikipediaImage(elementName) {
            try {
                const res = await fetch(`https://en.wikipedia.org/api/rest_v1/page/summary/${elementName}`);
                const data = await res.json();
                return data.originalimage?.source || data.thumbnail?.source || null;
            } catch (e) {
                return null;
            }
        }

        async function generateElementImage(elementName) {
            const loader = document.getElementById('image-loader');
            const img = document.getElementById('element-image');
            const placeholder = document.getElementById('image-placeholder');
            const indicator = document.getElementById('source-indicator');
            const loaderText = document.getElementById('loader-text');

            loader.classList.remove('hidden');
            img.classList.add('hidden');
            placeholder.classList.add('hidden');
            indicator.textContent = "";

            // Try AI Generation FIRST (if key is present)
            if (apiKey) {
                loaderText.textContent = "Synthesizing AI Visual...";
                try {
                    const promptText = `A professional macro studio photograph of a physical sample of the chemical element ${elementName}, clean laboratory background, 4k.`;
                    const res = await fetch(`https://generativelanguage.googleapis.com/v1beta/models/imagen-4.0-generate-001:predict?key=${apiKey}`, {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify({ instances: { prompt: promptText }, parameters: { sampleCount: 1 } })
                    });
                    const data = await res.json();
                    if (data.predictions?.[0]?.bytesBase64Encoded) {
                        img.src = `data:image/png;base64,${data.predictions[0].bytesBase64Encoded}`;
                        img.classList.remove('hidden');
                        indicator.textContent = "AI Generated Visualization";
                        loader.classList.add('hidden');
                        return;
                    }
                } catch (err) {}
            }

            // FALLBACK: Wikipedia Real Photo (Works in VS Code!)
            loaderText.textContent = "Fetching Real Photo...";
            const wikiUrl = await fetchWikipediaImage(elementName);
            if (wikiUrl) {
                img.src = wikiUrl;
                img.classList.remove('hidden');
                indicator.textContent = "Real Physical Specimen (Source: Wikipedia)";
                loader.classList.add('hidden');
            } else {
                placeholder.innerHTML = `<span class="text-xs text-red-500 font-mono">No Image Found</span>`;
                placeholder.classList.remove('hidden');
                loader.classList.add('hidden');
            }
        }

        function openModal(el) {
            const modal = document.getElementById('modal');
            document.getElementById('element-name').textContent = el.name;
            document.getElementById('element-category').textContent = el.cat.replace(/-/g, ' ');
            document.getElementById('atomic-number').textContent = el.n;
            document.getElementById('symbol').textContent = el.s;
            document.getElementById('atomic-mass').textContent = el.m;
            document.getElementById('element-summary').textContent = el.sum;
            
            modal.style.display = 'flex';
            generateElementImage(el.name);

            document.getElementById('generate-btn').onclick = () => generateElementImage(el.name);
        }

        document.getElementById('close-modal').onclick = () => {
            document.getElementById('modal').style.display = 'none';
        };

        window.onclick = (e) => {
            if (e.target.id === 'modal') document.getElementById('modal').style.display = 'none';
        };

        initTable();
    </script>
</body>
</html>